<article
         ng-repeat="post in ctrl.posts() track by post._id"
         class="lb-post list-group-item ng-cloak "
         ng-class="['lb-mainitem-{{ post.mainItem.item_type | varname }}', {'show-author-avatar': 
                        ctrl.timeline.settings.showAuthor &&
                        ctrl.timeline.settings.showAuthorAvatar &&
                        post.mainItem.item_type.indexOf('Advertisment') === -1,
                    'lb-post-permalink-selected': post._id === timeline.permalink._id}]">
    <span ng-if="post.mainItem.item_type.indexOf('Advertisment') === -1">
        <lb-author item="post.mainItem" timeline="timeline"></lb-author>
        <div class="lb-post-highlighted" ng-if="post.highlight">
            <i class="icon-star icon--orange"></i>
        </div>
        <div class="lb-post-permalink">
            <a href="{{ ctrl.timeline.permalink.get(post._id) }}" id="{{ post._id }}" target="_blank">
                <i class="icon-link icon--blue"></i>
            </a>
        </div>
    </span>
    <lb-gallery items="post.items" ng-if="post.showGallery"></lb-gallery>
    
    <span ng-if="post.mainItem.item_type.indexOf('Advertisment') !== -1">
        <div class="lb-advertisment" translate>Advertisment</div>
    </span>
    <span></span>    

    <div ng-repeat="item in post.items track by item._id" class="lb-item">
        <div ng-if="post.fullDetails && !$first" class="list-group-item">
            <div class="lb-timeline__header">
                <lb-author item="item" timeline="ctrl.timeline"></lb-author>
                <lb-item item="item" ident="true" gallery="post.showGallery"></lb-item>
            </div>
        </div>                
        <div ng-if="!post.fullDetails || $first">
            <lb-item item="item" gallery="post.showGallery"></lb-item>
        </div>
    </div>
    <div class="lb-updated-date ng-cloak" ng-show="post.showUpdate" translate>
        Updated {{post.content_updated_date | prettifyIsoDate}}
    </div>
</article>